@model Headstone.AI.Models.ViewModels.TrademarkDetailsViewModel
@using Headstone.Service.Helpers

@{
    ViewBag.Title = "Marka Detayları";
    ViewBag.CssPageName = "gallery-page";
    Session["PageName"] = "trademarks";
}

@section head{
    <link rel="stylesheet" type="text/css" href="/Content/vendor/plugins/Select2/css/core.css" />
    <link rel="stylesheet" type="text/css" href="/Content/custom/styles/css/form.css" />
    <link rel="stylesheet" type="text/css" href="/Content/custom/styles/css/paddings.css" />
    <link rel="stylesheet" type="text/css" href="/Content/custom/Jquery.Validation/Validation.css" />

    <!-- Kendo Telerik CSS -->
    <link href="https://kendo.cdn.telerik.com/2016.2.714/styles/kendo.common-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="https://kendo.cdn.telerik.com/2016.2.714/styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
    <link href="https://kendo.cdn.telerik.com/2016.2.714/styles/kendo.bootstrap.min.css" rel="stylesheet" type="text/css" />

    <!-- Kendo Telerik JS -->
    <script src="https://kendo.cdn.telerik.com/2016.2.714/js/kendo.all.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2016.2.714/js/kendo.aspnetmvc.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2016.2.714/js/messages/kendo.messages.tr-TR.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2016.2.714/js/cultures/kendo.culture.tr-TR.min.js"></script>
}

<section id="content">
    <!-- Page Intro -->
    <div class="mb20">
        <h4>@Model.Trademark.Name</h4>
        <hr class="alt short">
        <div class="row">
            @*<div class="col-md-8">
                <p class="text-muted">Note that the page header above may not be needed since it's been already included in the breadcrumb section.</p>
                <p class="text-muted">Also, type some introductory text about current page content. Lorem ipsum dolor sit amet,  is nisi ut aliquip ex ea commodo consectetur adipi sicing elit, sed do eiusmod tempor incididu ut labore et is nisi ut aliquip ex ea commodo dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exetation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
        </div>
    </div>
    <!-- End of Page Intro -->
    <!-- Tab Structure -->
    <div class="tab-block mb25">
        <!-- Tab Navi Items -->
        <ul class="nav nav-tabs tabs-border">
            <li class="active">
                <a href="#tab1_1" data-toggle="tab">Temel Bilgiler</a>
            </li>
            <li>
                <a href="#tab1_2" data-toggle="tab">Alt Markalar</a>
            </li>
            <li>
                <a href="#tab1_3" data-toggle="tab">Markanın Ürünleri</a>
            </li>
            @*<li>
                    <a href="#tab1_4" data-toggle="tab">İçerik Yönetimi</a>
                </li>
                <li>
                    <a href="#tab1_5" data-toggle="tab">Pazarlama Yönetimi</a>
                </li>*@
            <li>
                <a href="#tab1_6" data-toggle="tab">Görseller</a>
            </li>
        </ul>
        <!-- End of Tab Navi Items -->
        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Trademark Details Tab -->
            <div id="tab1_1" class="tab-pane active">
                <div class="row mb25">
                    <!-- Trademark Detail Table -->
                    <div class="col-xl-6 col-md-8 col-xs-12">
                        <table class="table table-hover">
                            <tbody>
                                <tr>
                                    <td class="w150 fw600">Marka İsmi</td>
                                    <td>@Model.Trademark.Name</td>
                                </tr>
                                <tr>
                                    <td class="fw600">Üst Marka</td>
                                    @if (Model.Trademark.Parent != null)
                                    {
                                        <td>@Model.Trademark.Parent.Name</td>
                                    }
                                </tr>

                                <tr>
                                    <td class="fw600" style="vertical-align:top;">Açıklama</td>
                                    <td class="text-muted">
                                        <p>@Model.Trademark.ShortDescription</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="fw600" style="vertical-align:top;">Ek Bilgi</td>
                                    <td class="text-muted">
                                        <p>@Model.Trademark.LongDescription</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="fw600">ERP Kodu</td>
                                    <td>@Model.Trademark.ERPCode</td>
                                </tr>
                                <tr>
                                    <td class="fw600">Durum</td>
                                    <td class="admin-form">
                                        <label class="switch switch-success switch-inline">
                                            <input id="trademarkStatus" type="checkbox" onchange="changeStatus()" checked="" name="Status">
                                            <label for="trademarkStatus"></label>
                                        </label>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div hidden id="statusResponse" class="row mb20">
                            <div class="col-xs-6">
                                <div class="panel-alert bg-success">
                                    <div id="responseText" class="alert alert-success" role="alert">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <input hidden id="status" value="@Model.Trademark.Status" />
                    </div>
                    <!-- End of Trademark Detail Table -->
                    <!-- Trademark Logo -->
                    @*<div class="col-md-3 col-xs-12 mt-xs-20 mt-md-0">
                            <div class="trademarkLogo-upload">
                                <div class="trademarkLogo-preview">
                                    @if (Model.Trademark.Pictures.Count() != 0)
                                    {
                                        <div id="imageActual" style="background-image: url(@Url.Static(Model.Trademark.Pictures.FirstOrDefault().ImageUrl));"></div>
                                    }
                                    else
                                    {
                                        <div id="imageActual" style="background-image: url(/Content/Files/Trademarks/1/logo.png);"></div>
                                    }
                                </div>
                            </div>
                        </div>*@
                    <!-- End of Trademark Logo -->
                </div>

                @*<div class="row">
                    <div class="col-md-12">
                        <button type="button" class="btn btn-block btn-primary w150 m-xs-c mt-xs-20 m-sm-0 mt-sm-20 m-md-0 mt-md-20" data-toggle="modal" data-target="#trademarkDetailModal">Düzenle</button>
                    </div>
                </div>*@
            </div>
            <!-- End of Trademark Details Tab -->
            <!-- Subtrademarks Tab -->
            <div id="tab1_2" class="tab-pane">
                <div class="row">
                    <div class="col-xl-6 col-md-8">
                        <table class="table table-hover">
                            <tbody>
                                @foreach (var subTrademark in Model.Trademark.Children)
                                {
                                    <tr>
                                        <td class="fw600 w100"><a href="/trademarks/details/@subTrademark.TrademarkId">@subTrademark.TrademarkId</a></td>
                                        <td>@subTrademark.Name</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- End of Subtrademarks Tab -->
            <!-- Trademark Products Tab -->
            <div id="tab1_3" class="tab-pane">
                <div class="row mb25">
                    <div class="col-md-12">
                        @(Html.Kendo().Grid<Headstone.AI.Models.ViewModels.ProductViewModel>().Name("Trademarks").Columns(cols =>
                    {
                        cols.Bound(u => u.ProductId).Title("Urun Id").ClientTemplate("<a href='" + Url.Action("Details", "Products") + "/#=ProductId#'>#=ProductId#</a>"); ;
                        cols.Bound(u => u.Name).Title("Urun Adı");
                        cols.Bound(u => u.ShortDescription).Title("Aciklama");
                        cols.Bound(u => u.Status).Title("Durum");
                    })
               .DataSource(dataSource => dataSource.Ajax().Read(read => read.Action("GetProductsByTrademark", "headstone", new { trademarkId = Model.Trademark.TrademarkId })).PageSize(50))
               .Groupable()
               .Filterable()
               .Pageable(pageable => pageable.Refresh(true).PageSizes(new int[] { 25, 50, 100, 1000 }).ButtonCount(5))
               .Sortable()
                        )
                    </div>
                </div>
            </div>
            <!-- End of Trademark Products -->
            <!-- Custom Ranking Tab -->
            @*<div id="tab1_2" class="tab-pane">
                    <div class="row mw600">
                        <div class="col-md-12 pt15 pl20">
                            <p class="mb30">
                                ABC markasına ait ürünlerin sıralamasını değiştirmek için aşağıdaki satırları sürükleyip dilediğiniz sırada bırakabilirsiniz. Sürükleme
                                işlemi sonlandırıldığında, sıralama otomatik olarak kaydedilecektir.
                            </p>

                            <ul id="sortable">
                                @foreach (var product in Model.Products)
                                {
                                    <li data-id="@product.ProductId">@product.Name</li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>*@
            <!-- End of Custom Ranking Tab -->
            <!-- Content Management Tab -->
            @*<div id="tab1_4" class="tab-pane">
                    <div class="row mw600">
                        <div class="col-md-12">

                        </div>
                    </div>
                </div>*@
            <!-- End of Content Management Tab -->
            <!-- Marketing Management Tab -->
            @*<div id="tab1_5" class="tab-pane">
                    <div class="row mw600">
                        <div class="col-md-12">

                        </div>
                    </div>
                </div>*@
            <!-- End of Marketing Management Tab -->
            <!-- Pictures Management Tab -->
            <div id="tab1_6" class="tab-pane  min-vh-500">

                <div class="col-md-12">
                    <div id="mix-container">

                        <!--Example image-->
                        @foreach (var picture in Model.Trademark.Pictures)
                        {
                            <div class="mix label1 folder1">
                                <div class="panel p6 pbn">
                                    <div class="of-h">
                                        <img src="@Url.Static(picture.ImageUrl)" class="img-responsive" title="@picture.ImageUrl">
                                        <div class="row table-layout">
                                            <div class="col-xs-8 va-m pln">
                                                <h6>@picture.ImageUrl</h6>
                                            </div>
                                            <div class="col-xs-4 text-right va-m prn">
                                                <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                <span class="fa fa-circle fs10 text-primary ml10"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                        <div>
                            @*<div class="mix label1 folder1">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/1.jpg" class="img-responsive" title="lost_typewritter.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>lost_typewritter.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-info ml10"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mix label2 folder2">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/2.jpg" class="img-responsive" title="stairs-to_soul.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>stairs-to_soul.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-alert ml10"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mix label3 folder3">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/3.jpg" class="img-responsive" title="why_are_locks.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>why_are_locks.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-danger ml10"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mix label1 folder1">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/4.jpg" class="img-responsive" title="cool_cup.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>cool_cup.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-primary ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label2 folder2">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="~/Content/img/stock/5.jpg" class="img-responsive" title="the-beach.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>the-beach.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-system ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label3 folder3">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/1.jpg" class="img-responsive" title="windy_dirtroad.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>windy_dirtroad.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-primary ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label1 folder1">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/2.jpg" class="img-responsive" title="yosemite_sun.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>yosemite_sun.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-alert ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label2 folder2">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/3.jpg" class="img-responsive" title="stairs-not.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>stairs-not.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-info ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label1 folder1">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/1.jpg" class="img-responsive" title="lost_typewritter.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>lost_typewritter.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-info ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label2 folder2">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/2.jpg" class="img-responsive" title="stairs-to_soul.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>stairs-to_soul.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-alert ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label3 folder3">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/3.jpg" class="img-responsive" title="why_are_locks.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>why_are_locks.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-danger ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mix label1 folder1">
                                    <div class="panel p6 pbn">
                                        <div class="of-h">
                                            <img src="/Content/img/stock/4.jpg" class="img-responsive" title="cool_cup.jpg">
                                            <div class="row table-layout">
                                                <div class="col-xs-8 va-m pln">
                                                    <h6>cool_cup.jpg</h6>
                                                </div>
                                                <div class="col-xs-4 text-right va-m prn">
                                                    <span class="fa fa-eye-slash fs12 text-muted"></span>
                                                    <span class="fa fa-circle fs10 text-primary ml10"></span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>*@
                        </div>
                        <!--End Example image-->

                        <div class="gap"></div>
                        <div class="gap"></div>
                        <div class="gap"></div>
                        <div class="gap"></div>

                    </div>
                </div>

            </div>
            <!-- End of Pictures Management Tab -->
        </div>
        <!-- End of Tab Content -->
    </div>
    <!-- End of Tab Structure -->
    <!-- Trademark Details Modal -->
    <div id="trademarkDetailModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            @using (Html.BeginForm("Details", "Trademarks", FormMethod.Post, new { enctype = "multipart/form-data", @class = "modal-content val-A" }))
            {
                <form data-validate="true" class="modal-content val-A">
                    <!-- Modal Header -->
                    <div class="admin-form theme-primary tab-pane active" id="login2" role="tabpanel">
                        <div class="panel panel-primary heading-border">
                            <div class="panel-heading">
                                <span class="panel-title">
                                    <i class="fa fa-pencil-square"></i>Marka Bilgileri
                                </span>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    x
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- End of Modal Header -->
                    <input type="hidden" name="Id" value="@(Model.Trademark.TrademarkId) " />
                    <!-- Modal Body -->
                    <div class="modal-body">
                        @Html.Partial("~/Views/TradeMarks/EditPartial.cshtml", Model.Trademark)
                    </div>
                    <!-- End of Modal Body -->
                    <!-- Modal Footer -->
                    <div class="modal-footer">
                        <button type="submit" onclick="preSubmit(this)" class="btn btn-primary w150">Kaydet</button>
                    </div>
                    <!-- End of Modal Footer -->
                </form>
            }
        </div>
    </div>
    <!-- End of Trademark Details Modal -->
</section>

@section scripts{
    <script src="/Content/custom/Jquery.Validation/jquery.validate.js"></script>
    <script src="/Content/custom/Jquery.Validation/jquery.validate.custom.js"></script>
    <script src="/Content/vendor/plugins/Select2/select2.full.min.js"></script>
    <script src="/Content/vendor/plugins/jquerymask/jquery.maskedinput.min.js"></script>
    <script src="/Content/custom/js/default.js"></script>
    <script src="/Content/vendor/plugins/magnific/jquery.magnific-popup.min.js"></script>
    <script src="/Content/custom/Magnific/magnific.js"></script>
    <script src="~/Content/custom/js/galleryWithFilter.js"></script>

    <script type="text/javascript">
        kendo.culture("tr-TR");
    </script>

    <script>
        $(function () {
            $("#sortable").sortable({
                placeholder: "ui-state-highlight",
                stop: function (event, ui) {
                    var ulElement = ui.item.parent();
                    var listElements = ulElement.children();
                    var listValues = {};

                    $(listElements).each(function (index, element) {
                        var trademarkID = $(element).data('id');
                        var trademarkName = element.innerHTML;

                        listValues[trademarkName] = {};
                        listValues[trademarkName].id = trademarkID;
                        listValues[trademarkName].rank = index;
                    });

                    console.log(listValues);
                }
            });
        });
    </script>


    <script>
        $(document).ready(function () {

            var status = document.getElementById("status").value

            if (status == "Active") {
                document.getElementById("trademarkStatus").checked = true
            }
            else {
                document.getElementById("trademarkStatus").checked = false
            }
        });

        function changeStatus() {
            var checked = document.getElementById("trademarkStatus").checked;
            if (checked) {
                var data = 1
            }
            else {
                var data = -1
            }
            $.ajax({
                type: "POST",
                url: '@Url.Action("UpdateTrademarkStatus","headstone")',
                data: { tid: @Model.Trademark.TrademarkId, status: data },
                success: function (response) {
                    if (response.ReturnCode == 200) {
                        document.getElementById("responseText").innerHTML = "Marka durumu başarıyla güncellendi."
                    }
                    else if (response.ReturnCode == -300) {
                        document.getElementById("responseText").innerHTML = "Marka durumu güncellenirken hata oluştu."
                    }
                        $("#statusResponse").show()
                        setTimeout(function () {
                            $("#statusResponse").hide()
                        }, 2000)
                }
            });
        }
    </script>
}

